tosca_definitions_version: tosca_simple_yaml_1_0
description: Template for deploying the simple-task-app via docker 
metadata:
  template_name: simple-task-docker-template
  template_author: stupro-toscana
  template_version: 1.0
imports:
  - docker: docker/dockertypes.yaml


topology_template:
  node_templates:
    myDockerEngine:
      type: DockerEngine

    simpleTaskApp:
      type: DockerApp
      attributes:
        tag:
          description: tag for docker image
          value: simple-task-app
        identifier:
          description: identifier of docker container
          value: simple-task-app-1
      interfaces:
        Standard:
          create:
            implementation: 
              primary: simple-task-app/create.sh
              # dependencies will get copied by orchestrator to the same location
              # as create.sh, before create.sh is executed
              dependencies: 
                - simple-task-app/Dockerfile
                - simple-task-app/createdb.sql
                - simple-task-app/index.php
                - simple-task-app/mysql-credentials.php


  outputs:
    endpoint:
      description: the endpoint of the simple-task-app
      value: { get_attribute: [ simpleTaskApp, endpoint ] }

