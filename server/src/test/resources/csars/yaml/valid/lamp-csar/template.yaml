tosca_definitions_version: tosca_simple_yaml_1_0
description: Template for deploying a lamp-stack application
metadata:
  template_name: lamp-stack-template
  template_author: stupro-toscana
  template_version: 1.0

node_types:
  ApacheWebServer:
    derived_from: tosca.nodes.WebServer

  mysql:
    derived_from: tosca.nodes.Database
    requirements:
      - host:
          node: tosca.nodes.DBMS.MySQL

  dbms:
    derived_from: tosca.nodes.DBMS
    properties:
      port:
        description: reflect the default MySQL server port
        default: 3306



topology_template:
  node_templates:
    ApacheWebServer:
      type: tosca.nodes.WebServer.Apache
      properties: #TODO
      requirements:
        - host: WebServer

    WebServer:
      type: tosca.nodes.Compute
      # TODO

    mysql:
      type: tosca.nodes.DBMS.MySQL
      properties:
          root_password: { get_input: my_mysql_rootpw }
          port: { get_input: my_mysql_port }
        requirements:
          - host: db_server
        interfaces:
          Standard:
            configure: scripts/my_own_configure.sh
